Vamos começar com a quinta declaração de tarefa e falar sobre os serviços de rede da AWS e como controlar e otimizar o acesso e a comunicação. Novamente, antes de irmos para esta lição e para os serviços de rede da AWS, sempre recomendo fundamentos, especialmente para fundamentos de redes. Tudo o que você faz na AWS usa rede. Quando você se comunica com a AWS, quando cria conexões entre seu ambiente on-premises e a AWS e assim por diante. É por isso que um design de rede sólido é a base de qualquer ambiente. No entanto, projetar e configurar sua base para rede é diferente na AWS e on-premises. A Amazon Virtual Private Cloud (Amazon VPC) ajuda você a controlar o acesso aos seus recursos. É uma nuvem privada virtual, basicamente é o seu próprio data center na nuvem. Você pode provisionar sua própria Amazon VPC em uma seção logicamente isolada da AWS, lançar diferentes recursos e criar sua própria rede privada virtual. Você tem controle total sobre esse ambiente de rede virtual, e isso inclui até mesmo escolher nossos próprios intervalos de endereços IP, criar sua própria sub-rede e configurar o acesso com suas tabelas de rotas e gateways de rede. Uma Amazon VPC oferece diversas camadas diferentes de segurança, listas de controle de acesso de rede e grupos de segurança que você pode configurar para controlar quem e o que tem permissão para acessar recursos dentro de sua Amazon VPC. De novo, uma Amazon VPC é uma rede privada virtual e é um serviço que usamos para criar redes privadas na AWS e nossos serviços privados serão executados desta Amazon VPC. Você também pode conectar as Amazon VPCs da sua rede privada da AWS com a sua on-premises, para ter um ambiente híbrido, ou pode conectar-se a outras plataformas de nuvem ao criar um ambiente de várias nuvens. Quando você cria uma Amazon VPC, ela fica em uma Região em uma conta da AWS, o que torna uma Amazon VPC um serviço regional, e as VPCs operam de forma resiliente, operando em várias Zonas de Disponibilidade em uma Região específica. Por padrão, sua Amazon VPC é isolada e privada até que você conceda explicitamente acesso público, mas há uma exceção e você precisa saber disso para seu exame, essa é a Amazon VPC-padrão. Existem dois tipos de Amazon VPCs na AWS, a VPC-padrão e você só pode ter uma Amazon VPC-padrão por Região e também as Amazon VPCs personalizadas. As Amazon VPCs personalizadas são configuradas por você e você é responsável por todas as configurações e, por padrão, elas são isoladas e privadas. As VPCs-padrão são criadas pela AWS quando você cria sua conta da AWS e a AWS define a configuração para você. Cada VPC-padrão vem com um intervalo CIDR de VPC, que é um determinado intervalo de endereços IP e esse CIDR de VPC define o intervalo inicial e final do endereço IP que essa Amazon VPC-padrão pode usar. Tudo o que está dentro de uma Amazon VPC usa esse intervalo de CIDR. Todas as comunicações com a Amazon VPC precisarão usar o CIDR de VPC, e as comunicações de saída serão provenientes desse CIDR de VPC. Todas as Amazon VPCs-padrão são configuradas da mesma forma, e com sua Amazon VPC, você pode dividir sua rede nas Zonas de Disponibilidade para obter resiliência, para poder subdividir sua Amazon VPC em sub-redes, e sub-redes é a abreviação de sub-rede. Cada Amazon VPC-padrão é configurada para ter uma sub-rede localizada em cada Zona de Disponibilidade dessa Região, e cada sub-rede na Amazon VPC padrão usa parte do intervalo de endereços IP do CIDR de VPC. Se uma de suas Zonas de Disponibilidade falhar, a sub-rede nessa Zona de Disponibilidade com falha também falhará. Mas com a Amazon VPC-padrão, você tem outras sub-redes em outras Zonas de Disponibilidade que ainda estão funcionando. Portanto, saiba como uma Amazon VPC pode ajudar você a controlar o acesso aos seus recursos. Primeiro, você deve entender que cada Amazon VPC tem um roteador de VPC altamente disponível, que move o tráfego de um lugar para outro e é executado em todas as Zonas de Disponibilidade que sua Amazon VPC usa. Este roteador de VPC tem uma interface de rede em cada sub-rede da Amazon VPC e usa o endereço Network+1. Novamente, isso faz parte dos fundamentos de redes que você deve compreender em alto nível. Você nunca precisa se preocupar com esse roteador VPC. Ele simplesmente funciona e é gerenciado pela AWS e roteia o tráfego entre sub-redes em sua Amazon VPC. Você pode controlar um pouco esse roteador criando tabelas de rotas e associando a tabela de rotas à sub-rede e, em seguida, adicionando regras para permitir o tráfego de entrada e saída de suas sub-redes. Cada Amazon VPC tem uma tabela de rotas principal associada às suas sub-redes, portanto, se você não associar explicitamente sua tabela de rotas à sua sub-rede, a Amazon VPC usará essa tabela de rotas principal e uma sub-rede só poderá ter uma tabela de rotas associada a ela por vez, mas você pode usar uma tabela de rotas para muitas sub-redes diferentes em sua Amazon VPC. Vamos falar também sobre o gateway de internet. Sua Amazon VPC só pode ter um gateway de internet por vez e, para sua Amazon VPC-padrão, o gateway de internet já está anexado. O gateway de internet é um serviço regional resiliente. Ele é altamente disponível e fica na borda da sua Amazon VPC e da zona pública da AWS e da internet, e gerencia o tráfego entre sua Amazon VPC, a zona pública da AWS e a internet, e o motivo pelo qual temos apenas uma tabela de rotas públicas é que o gateway de internet é por Amazon VPC. Portanto, um gateway de internet funciona em todas as Zonas de Disponibilidade. Se você criar um novo gateway de internet, deverá anexá-lo à Amazon VPC. Ele não será anexado automaticamente. Então você precisa adicionar uma rota à sua tabela de rota para permitir o tráfego de e para o gateway de internet. E se adicionarmos uma rota de gateway de internet a uma sub-rede, ela se tornará uma sub-rede pública porque terá acesso à zona pública da AWS e à internet aberta. Outra forma de controlar o acesso é usar listas de controle de acesso à rede, que são um tipo de filtro de segurança como um firewall, que pode filtrar o tráfego conforme ele entra e sai de uma sub-rede. As ACLs de rede são anexadas no nível da sub-rede e, por padrão, uma ACL de rede-padrão é criada para sua Amazon VPC-padrão e associada a todas as sub-redes. Lembre-se, as ACLs de rede gerenciam o tráfego que entra em uma sub-rede ou saem dela, porque elas estão associadas à sub-rede e não aos recursos. As ACLs de rede gerenciam apenas o tráfego que cruza os limites da sub-rede. De volta aos fundamentos. As ACLs de rede são stateless. Abordamos isso no domínio 2, mas lembre-se que stateless significa que se você adicionar uma regra para o tráfego de entrada, também deverá adicionar a mesma regra para o tráfego de saída. As ACLs de rede veem o tráfego apenas em uma direção. Se você permitir uma regra de entrada, também deverá permitir uma regra de saída para que sua ACL de rede veja explicitamente que o tráfego permitido de entrada também tem a saída permitida. As ACLs de rede veem o tráfego como dois fluxos separados. Então você deve ter duas regras, uma regra para cada fluxo. Os grupos de segurança são outro recurso de segurança da AWS, mas, ao contrário das ACLs de rede, eles não estão anexados à sub-rede. Os grupos de segurança são anexados à interface de rede elástica dos recursos da AWS na sub-rede. Eles também funcionam de maneira diferente do ACLs de rede. Os grupos de segurança ficam no limite da instância, em vez da sub-rede. Os grupos de segurança também têm regras de entrada e saída, mas os grupos de segurança são stateful. Lembre-se de que stateful significa que, se o tráfego for permitido, esse tráfego será automaticamente permitido de volta. Os grupos de segurança veem o tráfego de entrada e saída como parte do mesmo stream. Vamos abordar outro aspecto fundamental e falar sobre a tradução de endereços de rede conhecida como NAT. NAT é o processo de conceder acesso de saída de um recurso privado à internet. Um exemplo é o gateway de internet. O gateway de internet executa um tipo de NAT denominado NAT estático. O gateway de internet aloca um recurso com um endereço IP IPv4 público, de modo que, quando os dados ou pacotes saem desse recurso e passam pelo gateway de internet, o gateway de internet muda o endereço IP de origem do endereço IP privado para o endereço IP público e envia o pacote. Quando o pacote retorna, ele muda o endereço de destino do endereço IP público de volta para o endereço IP privado. Assim, o NAT fornece acesso privado à internet de saída da faixa CIDR e também à zona pública da AWS. E quando os recursos privados iniciam o tráfego com o gateway NAT, eles podem receber respostas de volta. Mas o tráfego externo da internet não pode iniciar o tráfego de entrada. Portanto, você pode usar o gateway NAT para permitir acesso de recursos privados à internet ou a zonas públicas da AWS. Por que um serviço privado precisaria de acesso à internet? O motivo mais comum são atualizações de software. Vamos prosseguir e falar sobre comunicação em sua Amazon VPC. O peering de VPC é uma forma de vincular várias Amazon VPCs e permite comunicações diretas entre dois sites isolados usando seus endereços IP privados. O peering de VPC pode abranger contas da AWS e também Regiões, e os dados compartilhados são criptografados usando a infraestrutura global da AWS. Os endpoints de VPC são objetos de gateway que criamos dentro de sua Amazon VPC, como gateway de internet e gateway NAT para permitir que instâncias dentro de uma Amazon VPC se conectem aos serviços públicos da AWS sem a necessidade de um gateway. Existem dois tipos de endpoints que precisamos conhecer para o exame de certificação, endpoints do gateway e endpoints de interface. O endpoint de gateway é usado para os serviços públicos da AWS. Lembre-se de que alguns serviços da AWS são serviços públicos e ficam dentro da zona pública da AWS. Às vezes, queremos nos conectar a esses serviços públicos, como S3 ou DynamoDB, por uma instância ou sub-rede privada que não tenha acesso à internet e não tenha um gateway NAT configurado. Os endpoints de interface são usados para todo o resto e você deve escolher o endpoint correto dependendo do serviço da AWS. Os endpoints de interface usam DNS, não roteamento com uma lista de prefixos e são para todos os outros serviços além de S3 e DynamoDB. Vamos também mencionar o AWS PrivateLink, que é um serviço de endpoint de VPC. O PrivateLink resolve os problemas de necessidade de expor uma aplicação a outras Amazon VPCs em outras contas da AWS e não requer peering de VPC ou outros gateways. Você também pode criar sua própria rede privada virtual de hardware ou conexão VPN entre seu data center on-premises e sua Amazon VPC e usar a AWS como uma extensão de seu data center ou ambiente atual. Lembre-se de uma lição anterior, isso é chamado de ambiente híbrido. A AWS tem um serviço chamado AWS VPN, e é um serviço em que você pode configurar uma VPN de hardware, que é uma conexão privada virtual altamente disponível entre sua Amazon VPC e redes on-premises. As VPNs usam a internet pública como rota de trânsito para sua VPC on-premises e Amazon VPC. As VPNs oferecem uma rota totalmente criptografada de onde quer que sua rede on-premises esteja localizada até sua Amazon VPC. Também temos outra opção para conectar suas redes on-premises e sua Amazon VPC, e é o AWS Direct Connect. Direct Connect é uma conexão física dedicada entre sua rede on-premises e a AWS. Para o exame, lembre-se de que dedicado é uma palavra-chave do Direct Connect. Uma conexão VPN é uma conexão privada virtual pela internet pública. Direct Connect é um pedaço físico de fibra executado entre sua rede on-premises e a rede AWS. É uma conexão física ou cruzada entre um roteador da AWS e outro roteador. E a AWS tem vários locais de conexão direta distribuídos globalmente. Outro fundamento necessário para este exame é o DNS (sistema de nomes de domínio). Amazon Route 53 é o produto DNS gerenciado da AWS e ajuda essencialmente em duas coisas. Primeiro, você pode registrar domínios e, segundo, o Route 53 pode hospedar zonas em servidores de nomes gerenciados. O Amazon Route 53 é um serviço global com um único banco de dados e é replicado entre Regiões, tornando-o um serviço globalmente resiliente. Isso significa que pode tolerar o failover de uma ou mais Regiões e continuar a operar. DNS é um serviço usado para ajudar a descobrir outros serviços na internet e traduz endereços da linguagem que os computadores entendem para a linguagem que os humanos entendem e depois vice-versa. Então, se quisermos acessar amazon.com(abre em uma nova guia), digitamos amazon.com(abre em uma nova guia), mas os computadores usam endereços IP. Assim, o DNS traduz nossas palavras em endereços IP e então encontra esse local. Então ele nos envia esse local e traduz o endereço IP em palavras que possamos entender. O Amazon Route 53 tem políticas de roteamento que também podem ajudar a garantir alta disponibilidade e resiliência, como políticas de roteamento de failover, ponderadas e de latência. E é claro que essa declaração de tarefa também abrange serviços de borda, como CloudFront e Global Accelerator, dos quais já falamos. Para o exame, saiba como aproveitar as vantagens dos recursos, controles e configurações para criar privacidade e segurança em seus ambientes. Saiba o que você pode fazer para fornecer conectividade às suas Amazon VPCs pela internet ou pelo seu local on-premises e quando usar a VPN, o Direct Connect e o Amazon Route 53 para seus casos de uso. Vamos começar com a sexta declaração de tarefa e falar sobre os serviços de armazenamento da AWS.